import{K as z,r as g,L as A,M as B,N as T,B as L,O as w,P as O,Q as N,R as E,d as V,A as $,S as D,V as F,c as h,b as u,t as U,I as W,n as b,W as I,F as S,e as j,m as H,g as M,l as R,o as x,u as K,h as P,X as Q}from"./index-740ff014.js";function X(t){var o;const n=w(t);return(o=n==null?void 0:n.$el)!=null?o:n}const q=B?window:void 0,G=B?window.navigator:void 0;function J(...t){let o,n,s,y;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,s,y]=t,o=q):[o,n,s,y]=t,!o)return T;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const r=[],m=()=>{r.forEach(l=>l()),r.length=0},e=(l,d,f,c)=>(l.addEventListener(d,f,c),()=>l.removeEventListener(d,f,c)),p=L(()=>[X(o),w(y)],([l,d])=>{m(),l&&r.push(...n.flatMap(f=>s.map(c=>e(l,f,c,d))))},{immediate:!0,flush:"post"}),i=()=>{p(),m()};return O(i),i}function Y(){const t=g(!1);return N()&&E(()=>{t.value=!0}),t}function Z(t){const o=Y();return z(()=>(o.value,!!t()))}function ee(t={}){const{navigator:o=G,read:n=!1,source:s,copiedDuring:y=1500,legacy:r=!1}=t,m=["copy","cut"],e=Z(()=>o&&"clipboard"in o),p=z(()=>e.value||r),i=g(""),l=g(!1),d=A(()=>l.value=!1,y);function f(){e.value?o.clipboard.readText().then(a=>{i.value=a}):i.value=_()}if(p.value&&n)for(const a of m)J(a,f);async function c(a=w(s)){p.value&&a!=null&&(e.value?await o.clipboard.writeText(a):C(a),i.value=a,l.value=!0,d.start())}function C(a){const v=document.createElement("textarea");v.value=a??"",v.style.position="absolute",v.style.opacity="0",document.body.appendChild(v),v.select(),document.execCommand("copy"),v.remove()}function _(){var a,v,k;return(k=(v=(a=document==null?void 0:document.getSelection)==null?void 0:a.call(document))==null?void 0:v.toString())!=null?k:""}return{isSupported:p,text:i,copied:l,copy:c}}const te={class:"text-lg mb-2 text-success-500"},oe={class:"px-2 py-1 rounded-xl bg-success-100 text-sm"},ne={class:"p-3 flex justify-center p-4 shadow-sm rounded-md"},se=u("code",{class:"text-sm whitespace-pre-wrap"}," ​ ​ ​ ​ ",-1),ae=[se],ie=["onClick"],le=u("div",{class:"i-mdi:content-copy"},null,-1),re=[le],ce=V({__name:"Sample",props:{title:{default:""},snippets:null},setup(t){const{copy:o}=ee(),n=g(null),s=g(null),y=g(null),r=g(null),m=g(null),e=$({collapsed:!0,isSnippetCodeOverflow:!1,codeSnippetMaxHeight:0,mounted:!1,toggleCollapse(){e.collapsed=!e.collapsed,e.resizeSnippetContent()},setSnippetContentHeight(){r.value&&s.value&&(e.codeSnippetMaxHeight=r.value.offsetHeight,e.isSnippetCodeOverflow=s.value.offsetHeight>e.codeSnippetMaxHeight)},resizeSnippetContent(){s.value&&r.value&&m.value&&(e.collapsed?e.codeSnippetMaxHeight=r.value.offsetHeight:e.codeSnippetMaxHeight=s.value.offsetHeight+m.value.offsetHeight)},onCopy(p){var i;o(p),(i=n.value)==null||i.success("copy code successfully!")}});return D(()=>{window.addEventListener("resize",e.resizeSnippetContent)}),F(()=>{window.removeEventListener("resize",e.resizeSnippetContent)}),E(()=>{e.setSnippetContentHeight(),e.resizeSnippetContent(),setTimeout(()=>e.mounted=!0,100)}),(p,i)=>{var d,f;const l=P("UToast");return x(),h("section",null,[u("div",{class:b(["p-3 sm:p-4 shadow border-t bg-white border-gray-100 border-r border-l mt-4",(d=t.snippets)!=null&&d.length?"rounded-t-lg":"rounded-lg border-b"])},[u("div",te,[u("span",oe,U(t.title),1)]),u("div",ne,[W(p.$slots,"default")])],2),(f=t.snippets)!=null&&f.length?(x(),h("div",{key:0,class:b(["relative bg-gray-800 rounded-b-lg overflow-y-hidden",{"transition-all duration-500 ease-out":e.mounted}]),style:I([e.isSnippetCodeOverflow?{maxHeight:`${e.codeSnippetMaxHeight}px`}:{}])},[u("div",{ref_key:"sampleRef",ref:y,class:"p-4"},[u("div",{ref_key:"dummyCodeRef",ref:r,class:"p-4 invisible absolute"},ae,512),u("div",{ref_key:"snippetRef",ref:s,class:b(["space-y-5 py-2 overflow-x-auto",{"pb-4":e.isSnippetCodeOverflow}])},[(x(!0),h(S,null,j(t.snippets,(c,C)=>(x(),h("div",{key:C,class:"relative group"},[R(K(Q).component,{language:"xml",code:c},null,8,["code"]),u("button",{class:"absolute items-center text-white top-0 right-0 transition-opacity ease-in-out inline-flex opacity-50 group-hover:opacity-100 duration-100",onClick:_=>e.onCopy(c)},re,8,ie)]))),128))],2)],512),e.isSnippetCodeOverflow?(x(),h("div",{key:0,ref_key:"expandButtonRef",ref:m,class:"absolute w-full p-2 text-center bottom-0 bg-gradient-to-t from-gray-800"},[u("button",{class:"text-sm rounded-full px-2 py-1 focus:outline-none bg-gray-700 text-gray-100 leading-tight",onClick:i[0]||(i[0]=c=>e.toggleCollapse())},[e.collapsed?(x(),h(S,{key:0},[H(" expand ")],64)):(x(),h(S,{key:1},[H(" collapse ")],64))])],512)):M("",!0)],6)):M("",!0),R(l,{ref_key:"toastRef",ref:n,position:"top",align:"right"},null,512)])}}});export{ce as _};
