<script setup lang="ts">
import { useRoute } from 'vue-router'
import { useSidebar } from '@/composables/useSidebar'
import { routes } from '@/router'

const { isOpen } = useSidebar()
const route = useRoute()

interface menuType {
  name: string
  children: Array<{
    name: string
    href: string
    icon?: string
    externalLink?: boolean
  }>
}

const menus: Array<menuType> = routes.map(e => ({
  name: e.name,
  children: e.children?.map(ee => ({
    name: ee.name,
    href: ee.path,
    icon: 'i-mdi:lightning-bolt',
    externalLink: false,
  })),
}) as menuType)
</script>

<template>
  <!-- cover -->
  <div
    class="fixed inset-0 transition-opacity z-20 bg-black opacity-50 lg:hidden"
    :class="isOpen ? 'block' : 'hidden'"
    @click="isOpen = false"
  />
  <div class="flex lg:w-64">
    <div
      class="fixed left-0 z-30 z-30 transform overflow-y-auto transition inset-y-0 w-64 bg-gray-50 duration-300 lg:static lg:inset-0 lg:translate-x-0"
      :class="isOpen ? 'translate-x-0 ease-out' : '-translate-x-full ease-in'"
    >
      <div class="flex items-center justify-center mt-8">
        <div class="flex items-center">
          <svg class="ml-2 h-10 w-10 text-blue-500" t="1683163768838" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14750" width="200" height="200"><path d="M945.230769 787.692308h78.769231v78.76923h-78.769231zM945.230769 708.923077h78.769231v78.769231h-78.769231zM945.230769 630.153846h78.769231v78.769231h-78.769231zM866.461538 866.461538h78.769231v78.769231h-78.769231z" fill="#1E2028" p-id="14751" /><path d="M866.461538 787.692308h78.769231v78.76923h-78.769231zM866.461538 708.923077h78.769231v78.769231h-78.769231zM866.461538 630.153846h78.769231v78.769231h-78.769231z" fill="#FF9343" p-id="14752" /><path d="M866.461538 551.384615h78.769231v78.769231h-78.769231zM787.692308 945.230769h78.76923v78.769231h-78.76923z" fill="#1E2028" p-id="14753" /><path d="M787.692308 866.461538h78.76923v78.769231h-78.76923z" fill="#FF9343" p-id="14754" /><path d="M787.692308 787.692308h78.76923v78.76923h-78.76923zM787.692308 708.923077h78.76923v78.769231h-78.76923zM787.692308 630.153846h78.76923v78.769231h-78.76923z" fill="#FFDD4D" p-id="14755" /><path d="M787.692308 551.384615h78.76923v78.769231h-78.76923z" fill="#FF9343" p-id="14756" /><path d="M787.692308 472.615385h78.76923v78.76923h-78.76923zM787.692308 393.846154h78.76923v78.769231h-78.76923zM787.692308 315.076923h78.76923v78.769231h-78.76923zM787.692308 236.307692h78.76923v78.769231h-78.76923zM787.692308 157.538462h78.76923v78.76923h-78.76923zM787.692308 78.769231h78.76923v78.769231h-78.76923zM708.923077 945.230769h78.769231v78.769231h-78.769231z" fill="#1E2028" p-id="14757" /><path d="M708.923077 866.461538h78.769231v78.769231h-78.769231z" fill="#FF9343" p-id="14758" /><path d="M708.923077 787.692308h78.769231v78.76923h-78.769231zM708.923077 708.923077h78.769231v78.769231h-78.769231zM708.923077 630.153846h78.769231v78.769231h-78.769231zM708.923077 551.384615h78.769231v78.769231h-78.769231z" fill="#FFDD4D" p-id="14759" /><path d="M708.923077 472.615385h78.769231v78.76923h-78.769231zM708.923077 393.846154h78.769231v78.769231h-78.769231zM708.923077 315.076923h78.769231v78.769231h-78.769231zM708.923077 236.307692h78.769231v78.769231h-78.769231zM708.923077 157.538462h78.769231v78.76923h-78.769231zM708.923077 78.769231h78.769231v78.769231h-78.769231z" fill="#FF9343" p-id="14760" /><path d="M708.923077 0h78.769231v78.769231h-78.769231zM630.153846 945.230769h78.769231v78.769231h-78.769231z" fill="#1E2028" p-id="14761" /><path d="M630.153846 866.461538h78.769231v78.769231h-78.769231z" fill="#FF9343" p-id="14762" /><path d="M630.153846 787.692308h78.769231v78.76923h-78.769231z" fill="#FFDD4D" p-id="14763" /><path d="M630.153846 708.923077h78.769231v78.769231h-78.769231zM630.153846 630.153846h78.769231v78.769231h-78.769231z" fill="#1E2028" p-id="14764" /><path d="M630.153846 551.384615h78.769231v78.769231h-78.769231z" fill="#FFDD4D" p-id="14765" /><path d="M630.153846 472.615385h78.769231v78.76923h-78.769231zM630.153846 393.846154h78.769231v78.769231h-78.769231zM630.153846 315.076923h78.769231v78.769231h-78.769231zM630.153846 236.307692h78.769231v78.769231h-78.769231zM630.153846 157.538462h78.769231v78.76923h-78.769231zM630.153846 78.769231h78.769231v78.769231h-78.769231z" fill="#FFF1B6" p-id="14766" /><path d="M630.153846 0h78.769231v78.769231h-78.769231zM551.384615 945.230769h78.769231v78.769231h-78.769231z" fill="#1E2028" p-id="14767" /><path d="M551.384615 866.461538h78.769231v78.769231h-78.769231z" fill="#FF9343" p-id="14768" /><path d="M551.384615 787.692308h78.769231v78.76923h-78.769231zM551.384615 708.923077h78.769231v78.769231h-78.769231zM551.384615 630.153846h78.769231v78.769231h-78.769231zM551.384615 551.384615h78.769231v78.769231h-78.769231z" fill="#FFDD4D" p-id="14769" /><path d="M551.384615 472.615385h78.769231v78.76923h-78.769231zM551.384615 393.846154h78.769231v78.769231h-78.769231zM551.384615 315.076923h78.769231v78.769231h-78.769231zM551.384615 236.307692h78.769231v78.769231h-78.769231zM551.384615 157.538462h78.769231v78.76923h-78.769231zM551.384615 78.769231h78.769231v78.769231h-78.769231zM472.615385 945.230769h78.76923v78.769231h-78.76923z" fill="#1E2028" p-id="14770" /><path d="M472.615385 866.461538h78.76923v78.769231h-78.76923z" fill="#FF9343" p-id="14771" /><path d="M472.615385 787.692308h78.76923v78.76923h-78.76923z" fill="#1E2028" p-id="14772" /><path d="M472.615385 708.923077h78.76923v78.769231h-78.76923zM472.615385 630.153846h78.76923v78.769231h-78.76923zM472.615385 551.384615h78.76923v78.769231h-78.76923z" fill="#FFDD4D" p-id="14773" /><path d="M472.615385 472.615385h78.76923v78.76923h-78.76923zM393.846154 945.230769h78.769231v78.769231h-78.769231z" fill="#1E2028" p-id="14774" /><path d="M393.846154 866.461538h78.769231v78.769231h-78.769231z" fill="#FF9343" p-id="14775" /><path d="M393.846154 787.692308h78.769231v78.76923h-78.769231zM393.846154 708.923077h78.769231v78.769231h-78.769231zM393.846154 630.153846h78.769231v78.769231h-78.769231zM393.846154 551.384615h78.769231v78.769231h-78.769231z" fill="#FFDD4D" p-id="14776" /><path d="M393.846154 472.615385h78.769231v78.76923h-78.769231zM393.846154 393.846154h78.769231v78.769231h-78.769231zM393.846154 315.076923h78.769231v78.769231h-78.769231zM393.846154 236.307692h78.769231v78.769231h-78.769231zM393.846154 157.538462h78.769231v78.76923h-78.769231zM393.846154 78.769231h78.769231v78.769231h-78.769231zM315.076923 945.230769h78.769231v78.769231h-78.769231z" fill="#1E2028" p-id="14777" /><path d="M315.076923 866.461538h78.769231v78.769231h-78.769231z" fill="#FF9343" p-id="14778" /><path d="M315.076923 787.692308h78.769231v78.76923h-78.769231z" fill="#FFDD4D" p-id="14779" /><path d="M315.076923 708.923077h78.769231v78.769231h-78.769231zM315.076923 630.153846h78.769231v78.769231h-78.769231z" fill="#1E2028" p-id="14780" /><path d="M315.076923 551.384615h78.769231v78.769231h-78.769231z" fill="#FFDD4D" p-id="14781" /><path d="M315.076923 472.615385h78.769231v78.76923h-78.769231zM315.076923 393.846154h78.769231v78.769231h-78.769231zM315.076923 315.076923h78.769231v78.769231h-78.769231zM315.076923 236.307692h78.769231v78.769231h-78.769231zM315.076923 157.538462h78.769231v78.76923h-78.769231zM315.076923 78.769231h78.769231v78.769231h-78.769231z" fill="#FF9343" p-id="14782" /><path d="M315.076923 0h78.769231v78.769231h-78.769231zM236.307692 945.230769h78.769231v78.769231h-78.769231z" fill="#1E2028" p-id="14783" /><path d="M236.307692 866.461538h78.769231v78.769231h-78.769231z" fill="#FFF1B6" p-id="14784" /><path d="M236.307692 787.692308h78.769231v78.76923h-78.769231zM236.307692 708.923077h78.769231v78.769231h-78.769231zM236.307692 630.153846h78.769231v78.769231h-78.769231zM236.307692 551.384615h78.769231v78.769231h-78.769231z" fill="#FFDD4D" p-id="14785" /><path d="M236.307692 472.615385h78.769231v78.76923h-78.769231zM236.307692 393.846154h78.769231v78.769231h-78.769231zM236.307692 315.076923h78.769231v78.769231h-78.769231zM236.307692 236.307692h78.769231v78.769231h-78.769231zM236.307692 157.538462h78.769231v78.76923h-78.769231zM236.307692 78.769231h78.769231v78.769231h-78.769231z" fill="#FFF1B6" p-id="14786" /><path d="M236.307692 0h78.769231v78.769231h-78.769231zM157.538462 945.230769h78.76923v78.769231H157.538462z" fill="#1E2028" p-id="14787" /><path d="M157.538462 866.461538h78.76923v78.769231H157.538462z" fill="#FFF1B6" p-id="14788" /><path d="M157.538462 787.692308h78.76923v78.76923H157.538462zM157.538462 708.923077h78.76923v78.769231H157.538462zM157.538462 630.153846h78.76923v78.769231H157.538462z" fill="#FFDD4D" p-id="14789" /><path d="M157.538462 551.384615h78.76923v78.769231H157.538462z" fill="#FFF1B6" p-id="14790" /><path d="M157.538462 472.615385h78.76923v78.76923H157.538462zM157.538462 393.846154h78.76923v78.769231H157.538462zM157.538462 315.076923h78.76923v78.769231H157.538462zM157.538462 236.307692h78.76923v78.769231H157.538462zM157.538462 157.538462h78.76923v78.76923H157.538462zM157.538462 78.769231h78.76923v78.769231H157.538462zM78.769231 866.461538h78.769231v78.769231H78.769231z" fill="#1E2028" p-id="14791" /><path d="M78.769231 787.692308h78.769231v78.76923H78.769231zM78.769231 708.923077h78.769231v78.769231H78.769231zM78.769231 630.153846h78.769231v78.769231H78.769231z" fill="#FFF1B6" p-id="14792" /><path d="M78.769231 551.384615h78.769231v78.769231H78.769231zM0 787.692308h78.769231v78.76923H0zM0 708.923077h78.769231v78.769231H0zM0 630.153846h78.769231v78.769231H0z" fill="#1E2028" p-id="14793" /></svg>
          <span class="text-2xl font-semibold mx-2 text-primary-500">
            Unocss UI
          </span>
        </div>
      </div>
      <nav class="mt-10">
        <template v-for="menu of menus" :key="menu.name">
          <p class="text-xs font-semibold text-gray-400 letter- my-2 mb-4 pl-4">
            {{ menu.name }}
          </p>
          <router-link
            v-for="child of menu.children" :key="child.name"
            class="flex items-center mt-4 border-l-4 px-6 py-2 duration-200"
            :class="[route.path === child.href ? 'active' : 'inactive']"
            :to="child.href"
          >
            <span v-if="child.icon" class="h-5 w-5" :class="child.icon" />
            <span class="mx-4"> {{ child.name }} </span>
          </router-link>
        </template>
      </nav>
    </div>
  </div>
</template>

<style scoped>
.active {
  @apply bg-primary-500 text-gray-100 border-gray-600;
}
.inactive {
  @apply text-gray-700 hover:bg-primary-500 hover:text-gray-100 hover:border-gray-600;
}
</style>
